!function($){$(".wpzinc-media-library-selector").each((function(){var t=$(this).data("multiple");void 0===t&&(t=!1),t&&$("ul",$(this)).sortable()})),$("#wpbody").on("click",".wpzinc-media-library-insert",(function(t){t.preventDefault();var e=$(this).closest(".wpzinc-media-library-selector"),a=$(e).data("input-name"),i=$(e).data("output-size"),n=$(e).data("file-type"),l=$(e).data("multiple"),r=$(e).data("limit");void 0===i&&(i="thumbnail"),void 0===n&&(n="image"),void 0===l&&(l=!1),void 0===r&&(r=99999);var o=[];if($("input[type=hidden]",$(e)).each((function(){o.push($(this).val())})),c)c.open();else{var c=wp.media({title:"Choose Item",button:{text:"Select"},library:{type:n},multiple:!!l&&"add"});c.on("open",(function(){var t=c.state().get("selection");o.forEach((function(e){attachment=wp.media.attachment(e),attachment.fetch(),t.add(attachment?[attachment]:[])}))})),c.off("select"),c.off("selection:toggle"),c.on("selection:toggle",(function(){var t=c.state().get("selection");t.length>r&&t.remove(t.last())})),c.on("select",(function(){var t=c.state().get("selection").map((function(t){return t.toJSON(),t}));$("ul",$(e)).html("");for(var n=t.length,l=0;l<n;l++){var r=t[l],o=r.get("id"),s=r.get("url"),m='<li class="wpzinc-media-library-attachment">';switch(m+='<a href="#" class="wpzinc-media-library-insert">',m+='<input type="hidden" name="'+a+'" value="'+o+'" />',r.attributes.type){case"image":void 0!==r.attributes.sizes[i]&&(s=r.attributes.sizes[i].url),m+='<img src="'+s+'" />';break;default:m+=r.attributes.filename;break}m+='<a href="#" class="wpzinc-media-library-remove">Remove</a>',m+="</li>",$("ul",$(e)).append(m)}})),c.open()}})),$("#wpbody").on("click",".wpzinc-media-library-remove",(function(t){t.preventDefault(),$(this).closest(".wpzinc-media-library-attachment").remove()}))}(jQuery);